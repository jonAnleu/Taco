@* Add this to enable null checks - prevents future bugs *@
@* If this file is .razor, enable in _Imports.razor instead: @nullable enable *@

<MudCarousel Class="rounded z-10 text-white" 
             ItemsSource="@_carouselCards" 
             @bind-SelectedIndex="_selectedIndex"  @* ← Fixed: use private field for binding *@
             Style="height:320px;" 
             ShowArrows="true" 
             ShowBullets="true" 
             EnableSwipeGesture="true" 
             AutoCycle="true">
    
    <ItemTemplate>
        <MudStack Justify="Justify.Center" Style="height: 100%; position: relative;">
            <MudOverlay Visible="true" Absolute="true" DarkBackground="true"/>
            <MudImage Src="@context.Image" Class="absolute z-0" Fluid="true"/>
        </MudStack>
    </ItemTemplate>
    
    @* REMOVED: BulletTemplate - MudBlazor's default bullets are fine *@
    @* REMOVED: PreviousButtonTemplate - default arrows work unless you REALLY need custom *@
    @* REMOVED: NextButtonTemplate - same as above *@
    
</MudCarousel>

@code {
    private int _selectedIndex = 0; @* ← Initialize to avoid weird binding issues *@
    
    @* Make this readonly - nobody should modify it after initialization *@
    private readonly List<CarouselCardModel> _carouselCards = new()
    {
        new() 
        { 
            Image = "images/food-shot-outside.jpg", 
        },
        @* PRO TIP: Put images in wwwroot folder or use a CDN *@
        new() 
        { 
            Image = "images/horchata-cinnamon.jpg", 
        },
        new() 
        { 
            Image = "images/logo-nb-sunny-rios.jpg", 
        }
    };

    @* Move this to a separate file if you reuse it *@
    public class CarouselCardModel
    {
        public string? Image { get; set; }
        
        @* BONUS: Add validation if you want *@
        // public bool IsValid => !string.IsNullOrWhiteSpace(Image) && 
        //                       !string.IsNullOrWhiteSpace(Title);
    }
}

